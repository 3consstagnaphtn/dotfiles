#!/bin/bash

# Fork process without any terminal output
launch() {
    nohup "$@" >/dev/null 2>&1 &
    exit
}

file_ext=$(printf "%s" "${1##*.}" | tr "[:upper:]" "[:lower:]")

[ -d "$1" ] && launch thunar "$1"

case "$file_ext" in
        mp4|mov|webm|gif|mkv|avi)
            launch mpv "$@" ;;

        jpg|jpeg|png)
            launch sxiv -a -b -N sxiv -p -r "$@" ;;

        otf|ttf|woff)
            launch fontpreview "$@" ;;

        mp3|flac|ogg|opus|wav)
            launch mpv "$@" ;;

        pdf|epub)
            launch evince "$@" ;;

        docx|rtf|odt|ods|pptx|xlsx|csv)
            launch libreoffice "$1" ;;

        xcf)
            launch gimp "$1" ;;

        pcap)
            launch wireshark "$1" ;;

        svg)
            launch firefox "$@" ;;

        html|htm|xhtml)
            launch firefox "$@" ;;

        openshot|osp)
            launch openshot-qt "$1" ;;

        *)
            echo "Not sure how to open $1"
esac
